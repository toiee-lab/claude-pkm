# Claude PKM (Personal Knowledge Management)

このプロジェクトは、Claude Project 機能を効果的に活用するためのドキュメント管理システムです。ベストプラクティスに従って、ドキュメント作成、ファイル名、フォルダ名作成、ファイル分割を行うことを支援する。

## ベストプラクティス

To get the most out of your RAG-enabled projects:

### Upload comprehensive content

- Add all relevant documents and files to your project upfront. The more context Claude has access to, the better it can assist you.

## Use clear, descriptive filenames

- Well-named files help Claude understand and retrieve the right information more effectively.

## Organize related content together
- Group related documents in the same project to enable Claude to draw connections between different sources.

## Reference specific documents

- When asking questions, you can reference specific documents by name to help Claude focus its search.

## ディレクトリ構造

```
claude-pkm/
├── profile/          # 個人プロファイル（自己紹介、作業スタイル、コミュニケーション設定）
├── projects/         # プロジェクト別のコンテキストをフォルダに分けて入れる
├── knowledge/        # ナレッジベース（特定分野の専門的な知識などをフォルダに分けて格納）
└── instructions/     # Claude への指示（一般指示、タスク別指示、文章のトーンサンプルなど）
```

## ファイル命名規則

- **形式**: 小文字ケバブケース（例: `my-document.md`）
- **言語**: 英語のみ
- **拡張子**: `.md`（Markdown）
- **命名方法**: ファイル名から内容が推測できるようにファイル名をつける

## ドキュメント構造ルール

1. **H1 タイトル必須**: 各ドキュメントは必ず `# タイトル` で始める
2. **見出し階層**: H1 → H2 → H3 の順で使用（スキップしない）
3. **概要セクション**: タイトル直後に概要を記述
4. **セクション区切り**: 適切な見出しでセクションを分割

## 機能（自然言語リクエスト対応）

ユーザーが自然言語でリクエストするだけで、以下の機能を実行します。

### 1. ドキュメント作成

**トリガー**: 「[カテゴリ]のドキュメントを作成」「新しい[カテゴリ]ドキュメント」など

**実行手順**:

1. **カテゴリ判定**: リクエストから以下のカテゴリを特定
   - `profile`: プロファイル（個人情報、作業スタイル、会社情報、チーム情報など）
   - `project`: プロジェクト用（プロジェクトごとにフォルダを作成）
   - `knowledge`: ナレッジ（技術知識、ドメイン知識）
   - `instruction`: Claude への指示

2. **フォルダ作成判定**: 要求に応えるためにフォルダが必要か判定
   - 作成しようとしているドキュメントが、新しいフォルダを必要とするか判定
   - 必要ならば、ユーザーの「作成して良いか？」確認する

3. **ファイル名確認**: ユーザーにファイル名を確認
   - 小文字ケバブケース（例: `my-document`）
   - `.md` 拡張子は自動付与
   - 既存ファイルと重複しないものを提案する

3.5. **コンテンツ充実度の確認** [BP1:包括]:
   - カテゴリ別に含めるべき情報をガイド
     - `profile`: 名前、役割、専門分野、作業スタイル、連絡先など
     - `project`: 目的、スコープ、技術スタック、チームメンバー、期限など
     - `knowledge`: 背景、主要概念、使用例、参考資料など
     - `instruction`: 目的、適用範囲、具体的な指示、例外事項など
   - 関連ドキュメントの存在確認 [BP3:整理]
   - 必要に応じて相互参照の追加を提案 [BP4:参照]

4. **配置先決定**:
   - `profile` → `/profile/[ファイル名].md`
   - `project` → `/projects/[プロジェクト名]/[ファイル名].md`
   - `knowledge` → `/knowledge/[ナレッジ名/`
   - `instruction` → `/instructions/[ファイル名].md`

5. **ファイル作成**: 指定された場所に新規ファイルを作成し、以下のベストプラクティスを適用
   - [BP1:包括] プレースホルダーを用意し、具体的な記述例を提示
     - 例: `## 概要\n\n[このセクションには、このドキュメントの目的と範囲を2-3文で記述してください]`
   - [BP2:明確] 明確なファイル名の例を提示
     - 良い例: `user-authentication.md`, `team-workflow.md`
     - 悪い例: `doc1.md`, `temp.md`, `untitled.md`
   - [BP3:整理] 関連ファイルへの参照セクションを自動挿入（該当する場合）
     - 例: `## 関連ドキュメント\n\n- [プロジェクト概要](./overview.md)\n- [技術スタック](../knowledge/tech-stack.md)`
   - [BP4:参照] 具体的な参照の良い例・悪い例を示す
     - 良い例: `「ユーザー認証」セクションを参照`, `user-auth.md を参照`
     - 悪い例: `前述の通り`, `上記参照`, `これについては...`

6. **次のステップ案内**: 作成後、ユーザーに次のアクションを提案
   - 内容の充実化（[BP1:包括] プレースホルダーを具体的な内容に置き換える）
   - 関連ドキュメントの確認（[BP3:整理] 他のドキュメントとの関連性を確認）
   - レビューの実施（品質チェック）

**エラーハンドリング**:
- 同名ファイル存在: 上書き確認または別名提案
- 不正なカテゴリ: 正しいカテゴリ（profile/project/knowledge/instruction）を案内
- テンプレート不在: エラーメッセージと原因を説明

### 2. ドキュメントレビュー

**トリガー**: 「[ファイル]をレビュー」「ドキュメントの品質チェック」など

**実行手順**:

1. **対象ファイル特定**:
   - 引数でファイルパスが指定されている場合: そのファイルを使用
   - 指定なしの場合: ユーザーに選択を促す（最近更新されたファイルを提案）

2. **ドキュメント読み込み**: 対象ファイルの内容を読み込む

3. **5観点スコアリング**（各10点満点）:

   **完全性（10点満点）**:
   - H1タイトルが存在する（2点）
   - 必須セクション（概要、詳細）が存在する（2点）
   - プレースホルダー（`[...]`）が残っていない（2点）
   - [BP1:包括] 包括的なコンテンツが含まれている（2点）
     - カテゴリに応じた必要情報が揃っている
     - 具体例や詳細が適切に記述されている
   - [BP3:整理] 関連情報が適切に整理されている（2点）
     - 関連ドキュメントへの参照が適切
     - 情報のグルーピングが論理的

   **正確性（10点満点）**:
   - カテゴリが正しい（profile/project/knowledge/instruction）（2点）
   - 記述内容に矛盾がない（4点）
   - 具体的な情報が含まれている（抽象的すぎない）（2点）
   - [BP3:整理] 配置が適切（関連コンテンツが同じプロジェクト/フォルダにある）（2点）

   **明確性（10点満点）**:
   - 見出し階層が適切（H1→H2→H3、スキップなし）（2点）
   - 概要が簡潔で分かりやすい（2点）
   - 専門用語に説明がある（2点）
   - 段落が適切な長さ（長すぎない）（2点）
   - [BP4:参照] 明確な参照（具体的な見出し名やファイル名を使用）（2点）
     - 「前述」「上記」などの曖昧な参照を避けている

   **一貫性（10点満点）**:
   - [BP2:明確] ファイル名が明確で説明的（3点）
     - 小文字ケバブケース形式
     - 内容が推測できる命名
     - 適切な長さ（短すぎず長すぎず）
   - 見出しスタイルが統一されている（2点）
   - リスト記法が統一されている（2点）
   - 他のドキュメントとの整合性（文体、フォーマット）（3点）

   **Claude最適化（10点満点）**:
   - Claude が理解しやすい構造（2点）
   - [BP4:参照] 相対参照を避け、具体的な参照を使用（2点）
   - 自己完結的な内容（外部参照が最小限）（2点）
   - 冗長性がない（2点）
   - 適切な長さ（200-2000文字程度）（2点）

4. **レポート出力**:
   ```
   ## ドキュメントレビュー結果

   **ファイル**: [ファイルパス]
   **総合スコア**: [合計点]/50

   | 観点 | スコア | 詳細 |
   |------|--------|------|
   | 完全性 | X/10 | [問題点] |
   | 正確性 | X/10 | [問題点] |
   | 明確性 | X/10 | [問題点] |
   | 一貫性 | X/10 | [問題点] |
   | Claude最適化 | X/10 | [問題点] |
   ```

4.5. **ベストプラクティス準拠チェック**:
   ```
   | ベストプラクティス | 状態 | 詳細 |
   |-------------------|------|------|
   | [BP1:包括] 包括的なコンテンツ | ✓/⚠/✗ | [評価詳細] |
   | [BP2:明確] 明確なファイル名 | ✓/⚠/✗ | [評価詳細] |
   | [BP3:整理] 関連コンテンツの整理 | ✓/⚠/✗ | [評価詳細] |
   | [BP4:参照] 具体的な参照 | ✓/⚠/✗ | [評価詳細] |
   ```
   - ✓（準拠）: ベストプラクティスに完全に準拠
   - ⚠（改善推奨）: 一部改善の余地あり
   - ✗（要対応）: 重大な問題あり、修正が必要

5. **改善提案**: 具体的な改善項目をリストアップ
   - 優先度の高い項目から順に記載
   - 具体的な修正案を提示

6. **次のアクション提案**:
   - **45-50点**: そのまま使用可能、Claude Projectへの取り込みOK
     - BP準拠度が高く、優れたドキュメント
   - **35-44点**: 軽微な改善を推奨（手動修正可能）
     - ⚠（改善推奨）項目を優先的に改善
     - BP違反の修正で品質向上が期待できる
   - **25-34点**: ドキュメント最適化が必要（最適化機能の使用を提案）
     - ✗（要対応）項目に重点的に対応
     - BP準拠により大幅な品質向上が見込める
   - **0-24点**: 再作成を推奨（テンプレートからやり直し）
     - ベストプラクティスに従って一から作り直すことを推奨

### 3. ドキュメント最適化

**トリガー**: 「[ファイル]を最適化」「Claude Projectに最適化」「ドキュメントの整理」など

**実行手順**:

1. **対象ファイル特定**: レビューと同様の方法でファイルを特定

2. **ドキュメント分析**: ファイルの内容を読み込み、問題点を検出。

3. **最適化チェックリスト実行**:

   **構造チェック**:
   - [ ] H1タイトルが1つだけ存在する
   - [ ] 見出し階層が正しい（H1→H2→H3、スキップなし）
   - [ ] 概要セクションがタイトル直後にある
   - [ ] セクションが適切に分割されている

   **可読性チェック**:
   - [ ] 段落が適切な長さ（3-5文程度）
   - [ ] リストや表を適切に使用している
   - [ ] コードブロックにシンタックスハイライトがある
   - [ ] 箇条書きが統一されている（`-` または `1.`）
   - [ ] 空行が適切に配置されている

   **Claude最適化チェック**:
   - [ ] 代名詞（「これ」「それ」）が明確である
   - [ ] 相対参照（「前述」「上記」）を使っていない
   - [ ] コンテキストが自己完結している
   - [ ] 冗長な表現がない
   - [ ] 相互参照が明確（具体的な見出し名で参照）
   - [ ] ファイルサイズが適切（100-2000文字程度）

   **ベストプラクティス準拠チェック**:

   [BP1:包括] 包括的なコンテンツ:
   - [ ] カテゴリに応じた必要情報がすべて含まれている
   - [ ] 具体例や詳細が適切に記述されている
   - [ ] プレースホルダーが残っていない
   - [ ] 各セクションに実質的な内容がある

   [BP2:明確] 明確なファイル名:
   - [ ] ファイル名が小文字ケバブケース形式である
   - [ ] ファイル名から内容が推測できる
   - [ ] ファイル名が適切な長さである（短すぎず長すぎず）
   - [ ] 一般的すぎる名前（doc, temp, untitled等）を避けている

   [BP3:整理] 関連コンテンツの整理:
   - [ ] 関連ドキュメントが同じプロジェクト/フォルダにある
   - [ ] 関連ドキュメントへの参照が適切に記載されている
   - [ ] 情報のグルーピングが論理的である
   - [ ] 重複する情報が複数ファイルに分散していない

   [BP4:参照] 具体的な参照:
   - [ ] 相対参照（「前述」「上記」「これ」等）を避けている
   - [ ] 具体的な見出し名でセクションを参照している
   - [ ] ファイル参照は具体的なファイル名を使用している
   - [ ] 参照先が明確で曖昧さがない

4. **問題ごとに修正案提示**:
   ```
   ### 問題1: 見出し階層のスキップ
   **現状**: H1 → H3（H2がスキップされている）
   **提案**: H2レベルの見出しを追加
   **理由**: 見出し階層の一貫性により、Claudeが構造を理解しやすくなる

   ### 問題2: [BP1:包括] 包括的なコンテンツの不足
   **現状**: プロジェクトドキュメントに技術スタックの記載がない
   **提案**: 「## 技術スタック」セクションを追加し、使用技術を列挙
   **理由**: Claude が適切な技術的支援を提供するために必要な情報
   **BP**: [BP1:包括] - プロジェクトに関する包括的な情報が必要

   ### 問題3: [BP4:参照] 曖昧な参照
   **現状**: 「上記の設定を参照してください」
   **提案**: 「『環境変数の設定』セクションを参照してください」
   **理由**: 具体的な参照により、Claude がコンテキストを正確に把握できる
   **BP**: [BP4:参照] - 具体的なドキュメント名やセクション名で参照

   ### 問題4: [BP2:明確] ファイル名が不明確
   **現状**: ファイル名が `doc1.md`
   **提案**: 内容に基づいて `user-authentication-guide.md` に変更
   **理由**: 明確なファイル名により、Claude が適切なドキュメントを検索・取得できる
   **BP**: [BP2:明確] - ファイル名から内容が推測できるように命名

   ### 問題5: [BP3:整理] 関連コンテンツの分散
   **現状**: 認証関連の情報が3つの異なるフォルダに分散
   **提案**: `/projects/auth/` フォルダにまとめる、または相互参照を追加
   **理由**: 関連情報をまとめることで、Claude が包括的な理解を得られる
   **BP**: [BP3:整理] - 関連ドキュメントは同じプロジェクト/フォルダに配置
   ```

5. **BP違反の優先順位付け**:
   - **高優先度**: [BP1:包括]、[BP4:参照]
     - Claude の理解に直接影響
     - RAG検索の精度に重要
     - 推奨修正順序: 最優先で対応
   - **中優先度**: [BP2:明確]、[BP3:整理]
     - 検索性と発見可能性に影響
     - 長期的なメンテナンス性に寄与
     - 推奨修正順序: 次に対応

7. **修正後の差分表示**: 変更内容を明示

8. **再レビュー推奨**: 最適化後、レビュー機能で品質を再確認することを提案

**ベストプラクティス適用ガイド**:

- **[BP1:包括] 包括的なコンテンツ**:
  - 避けるべき: プレースホルダーの放置、抽象的すぎる説明、重要情報の欠落
  - 推奨: 具体例の記載、カテゴリ別必要情報の網羅、実質的な内容
  - 目安: 各セクションに3文以上の具体的な説明

- **[BP2:明確] 明確なファイル名**:
  - 避けるべき: `doc1.md`, `temp.md`, `untitled.md`, `new-file.md`
  - 推奨: `user-authentication.md`, `project-roadmap.md`, `api-documentation.md`
  - 形式: 小文字ケバブケース、内容が推測できる、適切な長さ（2-5単語程度）

- **[BP3:整理] 関連コンテンツの整理**:
  - 避けるべき: 関連情報の分散、重複コンテンツ、孤立したドキュメント
  - 推奨: 同じプロジェクト/フォルダにグルーピング、相互参照の明記、論理的な構造
  - 目安: 関連ドキュメントへの参照セクションを含める

- **[BP4:参照] 具体的な参照**:
  - 避けるべき: 「前述」「上記」「これ」「それ」「先ほど」などの相対参照
  - 推奨: 「『環境変数の設定』セクション」「user-auth.md ファイル」「## API 仕様」
  - 形式: 具体的な見出し名、ファイル名、セクション名を使用

- **ファイル分割基準**:
  - 2000文字を超える場合: 複数ファイルへの分割を検討
  - 分割時: [BP3:整理] に従い、関連ファイルを同じフォルダに配置
  - 分割後: [BP4:参照] に従い、相互参照を明確に記載

## ワークフロー

### 新規ドキュメント作成

1. 「私についてのドキュメントを作成して」とリクエスト
2. ファイル名を確認し、内容を記述（内容が示されていない場合、質問を行う）
3. 「このドキュメントをレビューして」とリクエスト
4. 必要に応じて「ドキュメントを最適化して」とリクエスト
5. Claude Project に取り込み

### ドキュメント更新

1. 該当ドキュメントを編集
2. 「[ファイル]をレビューして」とリクエスト
3. 「同期状態を確認して」とリクエスト
4. 必要に応じて Claude Project を更新

## Claude Project への取り込み

このリポジトリのドキュメントを Claude Project に取り込む際は、以下を推奨：

- `profile/` 内の全ファイル
- `projects/` から関連するファイル
- `instructions/general-instructions.md`
- 必要な `knowledge/` 内のファイル
